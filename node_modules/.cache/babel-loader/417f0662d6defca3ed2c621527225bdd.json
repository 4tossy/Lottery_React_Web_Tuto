{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/4tossy/Documents/Study/lottery-react-web/src/App.js\";\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Web3 from 'web3';\nimport { Component } from 'react';\nlet lotteryAddress = '0x4aDd03DD5e63Ae33be3320deacbB83fbC50b13e6';\nlet lotteryABI = [{\n  \"inputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"constructor\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"BET\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"answer\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"DRAW\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"answer\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"FAIL\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"REFUND\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"bytes1\",\n    \"name\": \"answer\",\n    \"type\": \"bytes1\"\n  }, {\n    \"indexed\": false,\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"WIN\",\n  \"type\": \"event\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"answerForTest\",\n  \"outputs\": [{\n    \"internalType\": \"bytes32\",\n    \"name\": \"\",\n    \"type\": \"bytes32\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"owner\",\n  \"outputs\": [{\n    \"internalType\": \"address payable\",\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"getSomeValue\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"value\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"pure\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"getPot\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"pot\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }],\n  \"name\": \"betAndDistribute\",\n  \"outputs\": [{\n    \"internalType\": \"bool\",\n    \"name\": \"result\",\n    \"type\": \"bool\"\n  }],\n  \"payable\": true,\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }],\n  \"name\": \"bet\",\n  \"outputs\": [{\n    \"internalType\": \"bool\",\n    \"name\": \"result\",\n    \"type\": \"bool\"\n  }],\n  \"payable\": true,\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [],\n  \"name\": \"distribute\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"internalType\": \"bytes32\",\n    \"name\": \"answer\",\n    \"type\": \"bytes32\"\n  }],\n  \"name\": \"setAnswerForTest\",\n  \"outputs\": [{\n    \"internalType\": \"bool\",\n    \"name\": \"result\",\n    \"type\": \"bool\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }, {\n    \"internalType\": \"bytes32\",\n    \"name\": \"answer\",\n    \"type\": \"bytes32\"\n  }],\n  \"name\": \"isMatch\",\n  \"outputs\": [{\n    \"internalType\": \"enum Lottery.BettingResult\",\n    \"name\": \"\",\n    \"type\": \"uint8\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"pure\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"index\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"getBetInfo\",\n  \"outputs\": [{\n    \"internalType\": \"uint256\",\n    \"name\": \"answerBlockNumber\",\n    \"type\": \"uint256\"\n  }, {\n    \"internalType\": \"address\",\n    \"name\": \"bettor\",\n    \"type\": \"address\"\n  }, {\n    \"internalType\": \"bytes1\",\n    \"name\": \"challenges\",\n    \"type\": \"bytes1\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}];\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.polData = async () => {\n      await this.getPot();\n      await this.getBetEvents();\n    };\n\n    this.initWeb3 = async () => {\n      if (window.ethereum) {\n        console.log('Recent mode');\n        this.web3 = new Web3(window.ethereum);\n\n        try {\n          // Request account access if needed \n          await window.ethereum.enable(); // Acccounts now exposed\n          // this.web3.eth.sendTransaction({/* ... */});\n        } catch (error) {\n          // User denied account access...\n          console.log(`User denied account access error : ${error}`);\n        }\n      } // Legacy dapp browsers...\n      else if (window.web3) {\n          console.log('legacy mode');\n          this.web3 = new Web3(Web3.currentProvider); // Acccounts always exposed\n          // web3.eth.sendTransaction({/* ... */});\n        } // Non-dapp browsers...\n        else {\n            console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n          }\n\n      let accounts = await this.web3.eth.getAccounts();\n      this.accounts = accounts[0];\n      this.lotteryContract = new this.web3.eth.Contract(lotteryABI, lotteryAddress); // let pot = await this.lotteryContract.methods.getPot().call()\n      // console.log(pot);\n      // let owner = await this.lotteryContract.methods.owner().call()\n      // console.log(owner);\n    };\n\n    this.getPot = async () => {\n      let pot = await this.lotteryContract.methods.getPot().call();\n      let potString = this.web3.utils.fromWei(pot.toString(), 'ether');\n      this.setState({\n        pot: potString\n      });\n    };\n\n    this.getBetEvents = async () => {\n      const records = [];\n      let events = await this.lotteryContract.getPastEvents('BET', {\n        fromBlock: 0,\n        toBlock: 'latest'\n      });\n\n      for (let i = 0; i < events.length; i += 1) {\n        const record = {};\n        record.index = parseInt(events[i].returnValues.index, 10).toString();\n        record.bettor = events[i].returnValues.bettor;\n        record.betBlockNumber = events[i].blockNumber;\n        record.targetBlockNumber = events[i].returnValues.answerBlockNumber.toString();\n        record.challenges = events[i].returnValues.challenges;\n        record.win = 'Not Revealed';\n        record.answer = '0x00';\n        records.unshift(record);\n      }\n\n      console.log(records);\n      this.setState({\n        betRecords: records\n      });\n    };\n\n    this.bet = async () => {\n      //nonce\n      let challenges = '0x' + this.state.challenges[0].toLowerCase() + this.state.challenges[1].toLowerCase();\n      let nonce = await this.web3.eth.getTransactionCount(this.accounts);\n      this.lotteryContract.methods.betAndDistribute(challenges).send({\n        from: this.accounts,\n        value: 5000000000000000,\n        gas: 300000,\n        nonce: nonce\n      }).on('transactionHash', hash => {\n        console.log(hash);\n      });\n    };\n\n    this.onClickCard = _Character => {\n      this.setState({\n        challenges: [this.state.challenges[1], _Character]\n      });\n    };\n\n    this.gerCard = (_Character, _cardStyle) => {\n      let _card = '';\n\n      if (_Character === 'A') {\n        _card = '🂡';\n      }\n\n      if (_Character === 'B') {\n        _card = '🂱';\n      }\n\n      if (_Character === 'C') {\n        _card = '🃁';\n      }\n\n      if (_Character === 'D') {\n        _card = '🃑';\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        className: _cardStyle,\n        onClick: () => {\n          this.onClickCard(_Character);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"card-text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"card-text text-center\",\n            style: {\n              fontSize: 300\n            },\n            children: _card\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"card-text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.state = {\n      betRecords: [],\n      winRecords: [],\n      failRecords: [],\n      pot: '0',\n      challenges: ['A', 'B'],\n      finalRecords: [{\n        bettor: '0xabcd...',\n        index: '0',\n        challenges: 'ab',\n        answer: 'ab',\n        targetBlockNumber: '10',\n        pot: '0'\n      }]\n    };\n  }\n\n  async componentDidMount() {\n    await this.initWeb3();\n    await this.polData(); // setInterval(this.polData, 1000);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jumbotron\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [\"Current Pot : \", this.state.pot]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Lottery\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Lottery tutorial\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Your Bet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [this.state.challenges[0], \" \", this.state.challenges[1]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-group\",\n          children: [this.gerCard('A', 'card bg-primary'), this.gerCard('B', 'card bg-warning'), this.gerCard('C', 'card bg-danger'), this.gerCard('D', 'card bg-success')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger btn-lg\",\n          onClick: this.bet,\n          children: \"BET!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-dark table-striped\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Index\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Challenge\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Answer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Pot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"AnswerBlockNumber\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.state.finalRecords.map((records, index) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: records.index\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/4tossy/Documents/Study/lottery-react-web/src/App.js"],"names":["Web3","Component","lotteryAddress","lotteryABI","App","constructor","props","polData","getPot","getBetEvents","initWeb3","window","ethereum","console","log","web3","enable","error","currentProvider","accounts","eth","getAccounts","lotteryContract","Contract","pot","methods","call","potString","utils","fromWei","toString","setState","records","events","getPastEvents","fromBlock","toBlock","i","length","record","index","parseInt","returnValues","bettor","betBlockNumber","blockNumber","targetBlockNumber","answerBlockNumber","challenges","win","answer","unshift","betRecords","bet","state","toLowerCase","nonce","getTransactionCount","betAndDistribute","send","from","value","gas","on","hash","onClickCard","_Character","gerCard","_cardStyle","_card","fontSize","winRecords","failRecords","finalRecords","componentDidMount","render","map"],"mappings":"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","sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport Web3 from 'web3';\nimport { Component } from 'react';\n\nlet lotteryAddress = '0x4aDd03DD5e63Ae33be3320deacbB83fbC50b13e6';\nlet lotteryABI = [ { \"inputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"constructor\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"BET\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"answer\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"DRAW\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"answer\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"FAIL\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"REFUND\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"amount\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"bytes1\", \"name\": \"answer\", \"type\": \"bytes1\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" } ], \"name\": \"WIN\", \"type\": \"event\" }, { \"constant\": true, \"inputs\": [], \"name\": \"answerForTest\", \"outputs\": [ { \"internalType\": \"bytes32\", \"name\": \"\", \"type\": \"bytes32\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"owner\", \"outputs\": [ { \"internalType\": \"address payable\", \"name\": \"\", \"type\": \"address\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getSomeValue\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"value\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"pure\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"getPot\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"pot\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" } ], \"name\": \"betAndDistribute\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"result\", \"type\": \"bool\" } ], \"payable\": true, \"stateMutability\": \"payable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" } ], \"name\": \"bet\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"result\", \"type\": \"bool\" } ], \"payable\": true, \"stateMutability\": \"payable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [], \"name\": \"distribute\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"internalType\": \"bytes32\", \"name\": \"answer\", \"type\": \"bytes32\" } ], \"name\": \"setAnswerForTest\", \"outputs\": [ { \"internalType\": \"bool\", \"name\": \"result\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" }, { \"internalType\": \"bytes32\", \"name\": \"answer\", \"type\": \"bytes32\" } ], \"name\": \"isMatch\", \"outputs\": [ { \"internalType\": \"enum Lottery.BettingResult\", \"name\": \"\", \"type\": \"uint8\" } ], \"payable\": false, \"stateMutability\": \"pure\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"internalType\": \"uint256\", \"name\": \"index\", \"type\": \"uint256\" } ], \"name\": \"getBetInfo\", \"outputs\": [ { \"internalType\": \"uint256\", \"name\": \"answerBlockNumber\", \"type\": \"uint256\" }, { \"internalType\": \"address\", \"name\": \"bettor\", \"type\": \"address\" }, { \"internalType\": \"bytes1\", \"name\": \"challenges\", \"type\": \"bytes1\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" } ]\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      betRecords: [],\n      winRecords: [],\n      failRecords: [],\n      pot: '0',\n      challenges: ['A', 'B'],\n      finalRecords: [{\n        bettor:'0xabcd...',\n        index:'0',\n        challenges:'ab',\n        answer:'ab',\n        targetBlockNumber:'10',\n        pot:'0'\n      }]\n    }\n  }\n  async componentDidMount() {\n    await this.initWeb3();\n    await this.polData();\n    // setInterval(this.polData, 1000);\n  }\n\n  polData = async () => {\n    await this.getPot();\n    await this.getBetEvents();\n  }\n\n  initWeb3 = async () => {\n\n      if (window.ethereum) {\n        console.log('Recent mode')\n        this.web3 = new Web3(window.ethereum);\n        try {\n            // Request account access if needed \n            await window.ethereum.enable();\n            // Acccounts now exposed\n            // this.web3.eth.sendTransaction({/* ... */});\n        } catch (error) {\n            // User denied account access...\n            console.log(`User denied account access error : ${error}`);    \n          }\n      }\n      // Legacy dapp browsers...\n      else if (window.web3) {\n        console.log('legacy mode')\n        this.web3 = new Web3(Web3.currentProvider);\n        // Acccounts always exposed\n        // web3.eth.sendTransaction({/* ... */});\n      }\n      // Non-dapp browsers...\n      else {\n          console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');\n      }\n\n      let accounts = await this.web3.eth.getAccounts();\n      this.accounts = accounts[0];\n\n      this.lotteryContract = new this.web3.eth.Contract(lotteryABI, lotteryAddress);\n\n      // let pot = await this.lotteryContract.methods.getPot().call()\n      // console.log(pot);\n\n      // let owner = await this.lotteryContract.methods.owner().call()\n      // console.log(owner);\n\n\n    }\n\n  getPot = async () => {\n    let pot = await this.lotteryContract.methods.getPot().call();\n    let potString = this.web3.utils.fromWei(pot.toString(), 'ether');\n    this.setState({pot:potString});\n  }\n  \n  getBetEvents = async () => {\n    const records = [];\n    let events = await this.lotteryContract.getPastEvents('BET', {fromBlock:0, toBlock:'latest'});\n    for(let i=0; i<events.length; i+=1) {\n      const record = {}\n      record.index = parseInt(events[i].returnValues.index, 10).toString();\n      record.bettor = events[i].returnValues.bettor;\n      record.betBlockNumber = events[i].blockNumber;\n      record.targetBlockNumber = events[i].returnValues.answerBlockNumber.toString();\n      record.challenges = events[i].returnValues.challenges;\n      record.win = 'Not Revealed';\n      record.answer = '0x00';\n      records.unshift(record);\n    }\n    console.log(records);\n    this.setState({betRecords:records})\n  }\n\n  bet = async () => {\n    //nonce\n    let challenges = '0x' + this.state.challenges[0].toLowerCase() + this.state.challenges[1].toLowerCase();\n    let nonce = await this.web3.eth.getTransactionCount(this.accounts);\n    this.lotteryContract.methods.betAndDistribute(challenges).send({from:this.accounts, value:5000000000000000, gas:300000, nonce:nonce})\n    .on('transactionHash', (hash) => {\n      console.log(hash)\n    })\n  }\n  onClickCard = (_Character) => {\n    this.setState({\n      challenges : [this.state.challenges[1], _Character]\n    })\n  }\n  gerCard = (_Character, _cardStyle) => {\n\n    let _card = '';\n    if(_Character === 'A') {\n      _card = '🂡';\n    }\n    if(_Character === 'B') {\n      _card = '🂱';\n    }\n    if(_Character === 'C') {\n      _card = '🃁';\n    }\n    if(_Character === 'D') {\n      _card = '🃑';\n    }\n    return (\n      <button className={_cardStyle} onClick = {() => {\n        this.onClickCard(_Character)\n      }}>\n        <div className=\"card-body text-center\">\n          <p className=\"card-text\"></p>\n          <p className=\"card-text text-center\" style = {{fontSize:300}}>{_card}</p>\n          <p className=\"card-text\"></p>\n        </div>\n      </button>  \n    )\n  }\n  render() {\n    return (\n      <div className=\"App\">\n\n        {/* Header - Pot, Betting charactors */}\n        <div className=\"container\">\n          <div className=\"jumbotron\">\n            <h1>Current Pot : {this.state.pot}</h1>\n            <p>Lottery</p>\n            <p>Lottery tutorial</p>\n            <p>Your Bet</p>\n            <p>{this.state.challenges[0]} {this.state.challenges[1]}</p>\n          </div>\n        </div>\n\n        {/* Card section*/}\n        <div className=\"container\">\n          <div className=\"card-group\">\n            {this.gerCard('A', 'card bg-primary')}\n            {this.gerCard('B', 'card bg-warning')}\n            {this.gerCard('C', 'card bg-danger')}\n            {this.gerCard('D', 'card bg-success')}\n          </div>  \n        </div> \n        <br></br>\n        <div className=\"container\">\n          <button className=\"btn btn-danger btn-lg\" onClick = {this.bet}>BET!</button>\n        </div>\n        <br></br>\n        <div className=\"container\">\n          <table className=\"table table-dark table-striped\">\n            <thead>\n              <tr>\n                <th>Index</th>\n                <th>Address</th>\n                <th>Challenge</th>\n                <th>Answer</th>\n                <th>Pot</th>\n                <th>Status</th>\n                <th>AnswerBlockNumber</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.state.finalRecords.map((records, index) => {\n                  return (\n                    <tr key={index}>\n                      <td>{records.index}</td>\n                      <td>0</td>\n                      <td>0</td>\n                      <td>0</td>\n                      <td>0</td>\n                      <td>0</td>\n                      <td>0</td>\n                    </tr>\n                  )\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}